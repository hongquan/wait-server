.\" Automatically generated by Pandoc 2.2.1
.\"
.TH "wait\-server" "1" "March 2019" "" ""
.hy
.SH NAME
.PP
wait\-server \- Test and wait for server availability
.SH SYNOPSIS
.PP
\f[B]wait\-server\f[] [[\f[I]HOST\f[]] \f[I]PORT\f[]] [\f[B]\-t\f[]
\f[I]<timeout>\f[]][\f[B]\-q\f[]][\f[B]\-h\f[]]
.SH DESCRIPTION
.PP
\f[B]wait\-server\f[] tries connecting to port \f[B]PORT\f[] at
\f[B]HOST\f[] (a domain name or IP address) in 5 seconds.
Before that time is exhausted, if the port is connected successfully,
\f[B]wait\-server\f[] will exit with success status (\f[I]0\f[]),
otherwise, it will exit with error status (\f[I]1\f[]).
You can change the timeout with option \f[B]\-t\f[].
.SH ARGUMENTS
.TP
.B \f[B]PORT\f[]
TCP port where the server is supposed to listen.
Default to \f[I]8000\f[].
.RS
.RE
.TP
.B \f[B]HOST\f[]
Hostname or IP address of the server.
Default to \f[I]localhost\f[].
Note that when this argument is given, you must provide \f[B]PORT\f[].
.RS
.RE
.SH OPTIONS
.TP
.B \f[B]\-t\f[]
Duration in second to test connectivity, before exiting.
\f[B]wait\-server\f[] will retry to connect every second in this time
range.
Default is \f[I]5\f[] second.
.RS
.RE
.TP
.B \f[B]\-q\f[]
Quiet.
If this option is absent, the tool will show a sequence of dots to
indicate its progress.
.RS
.RE
.TP
.B \f[B]\-h\f[]
Show help and exit.
.RS
.RE
.SH EXAMPLES
.IP
.nf
\f[C]
$\ wait\-server\ 5000
$\ wait\-server\ agriconnect.vn\ 80
$\ wait\-server\ 8086\ \-t\ 10
\f[]
.fi
.PP
Main purpose of this tool, is to be used in a \f[I]systemd\f[] service,
to delay the service until some server is online.
For example, you have \f[I]service\-a\f[] and \f[I]service\-b\f[], in
which \f[I]service\-a\f[] is a server software that takes long time to
initialize (often Java application), and \f[I]service\-b\f[] should be
run only after \f[I]service\-a\f[] is ready.
You can write the \f[I]systemd\f[] service file like this:
.IP
.nf
\f[C]
[Unit]
After=service\-a.service

[Service]
ExecStartPre=/usr/bin/wait\-server
ExecStart=/usr/bin/application\-b
\f[]
.fi
.SH AUTHORS
Nguyễn Hồng Quân <ng.hong.quan@gmail.com>.
